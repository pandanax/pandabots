# üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞

> –í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–º, –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã —Å–æ–¥–µ—Ä–∂–∞—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

## ‚ö†Ô∏è –§–∞–π–ª—ã —Å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–ù–ï –¥–ª—è git!)

–°–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã —Å–æ–¥–µ—Ä–∂–∞—Ç —Å–µ–∫—Ä–µ—Ç—ã –∏ **–ù–ï –î–û–õ–ñ–ù–´** –±—ã—Ç—å –≤ git:

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚ùå `deploy/.env` - —Å–æ–¥–µ—Ä–∂–∏—Ç:
  - `POSTGRES_PASSWORD` - –ø–∞—Ä–æ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
  - `N8N_ENCRYPTION_KEY` - –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è n8n (–∫—Ä–∏—Ç–∏—á–Ω–æ!)
  - `LETSENCRYPT_EMAIL` - email –¥–ª—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
  
‚úÖ **–ï—Å—Ç—å** `deploy/.env.example` - –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —à–∞–±–ª–æ–Ω

### 2. Terraform –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚ùå `terraform/terraform.tfvars` - —Å–æ–¥–µ—Ä–∂–∏—Ç:
  - Cloud ID –∏ Folder ID
  - –ü—É—Ç–∏ –∫ SSH –∫–ª—é—á–∞–º
  - –ü—É—Ç–∏ –∫ service account –∫–ª—é—á–∞–º
  - IP –∞–¥—Ä–µ—Å–∞
  
‚úÖ **–ï—Å—Ç—å** `terraform/terraform.tfvars.example` - –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —à–∞–±–ª–æ–Ω

### 3. Terraform state
- ‚ùå `terraform/terraform.tfstate` - —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã –∏ –∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- ‚ùå `terraform/terraform.tfstate.backup` - —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è state

### 4. Yandex Cloud credentials
- ‚ùå `~/.yc/` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Yandex Cloud CLI
- ‚ùå `*.json` - service account –∫–ª—é—á–∏ (–∫—Ä–æ–º–µ package.json)

### 5. SSH –∫–ª—é—á–∏
- ‚ùå `*.pem` - –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏
- ‚ùå `*.key` - –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏
- ‚úÖ `*.pub` - –ø—É–±–ª–∏—á–Ω—ã–µ –∫–ª—é—á–∏ (–º–æ–∂–Ω–æ –≤ git)

## ‚úÖ –ß—Ç–æ –ú–û–ñ–ù–û –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å

### –ü—É–±–ª–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- ‚úÖ **IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞** `84.252.137.46` - —ç—Ç–æ –ø—É–±–ª–∏—á–Ω—ã–π IP, –¥–æ—Å—Ç—É–ø–Ω—ã–π —á–µ—Ä–µ–∑ DNS
- ‚úÖ **–î–æ–º–µ–Ω** `n8n.mandala-app.online` - –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ–º–µ–Ω
- ‚úÖ **SSH –ø–æ—Ä—Ç** 22 - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç
- ‚úÖ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞** - –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å

### –®–∞–±–ª–æ–Ω—ã –∏ –ø—Ä–∏–º–µ—Ä—ã
- ‚úÖ `.env.example` - —à–∞–±–ª–æ–Ω –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π
- ‚úÖ `terraform.tfvars.example` - —à–∞–±–ª–æ–Ω –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö ID
- ‚úÖ –í—Å—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (*.md —Ñ–∞–π–ª—ã)
- ‚úÖ –°–∫—Ä–∏–ø—Ç—ã (*.sh —Ñ–∞–π–ª—ã)
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (Terraform, Docker Compose, Nginx)

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –≤ .gitignore

–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ `.gitignore` —Å–æ–¥–µ—Ä–∂–∏—Ç:

```gitignore
# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
.env
*.env
!.env.example

# Terraform
terraform/.terraform/
terraform/.terraform.lock.hcl
terraform/terraform.tfstate
terraform/terraform.tfstate.backup
terraform/terraform.tfvars
!terraform/terraform.tfvars.example

# Yandex Cloud
.yc/
*.json
!package.json
!package-lock.json

# SSH –∫–ª—é—á–∏
*.pem
*.key
!*.pub

# –ë–µ–∫–∞–ø—ã
*.sql
*.sql.gz
*.tar.gz
*.backup

# –õ–æ–≥–∏
*.log
logs/
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ git push

–ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º push –≤—ã–ø–æ–ª–Ω–∏:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –Ω–µ—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ staged —Ñ–∞–π–ª–∞—Ö
git diff --cached | grep -i "password\|secret\|key\|token"

# 2. –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å
git status

# 3. –£–±–µ–¥–∏—Å—å —á—Ç–æ .env –∏ terraform.tfvars –ù–ï –≤ —Å–ø–∏—Å–∫–µ
git ls-files | grep -E "(\.env$|terraform\.tfvars$)"

# –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –≤—ã—à–µ —á—Ç–æ-—Ç–æ –Ω–∞—à–ª–∞ - STOP! –£–¥–∞–ª–∏ —ç—Ç–∏ —Ñ–∞–π–ª—ã –∏–∑ git!
```

## üö® –ï—Å–ª–∏ —Å–ª—É—á–∞–π–Ω–æ –∑–∞–∫–æ–º–º–∏—Ç–∏–ª —Å–µ–∫—Ä–µ—Ç

1. **–ù–ï PUSH!** –ï—Å–ª–∏ –µ—â–µ –Ω–µ –∑–∞–ø—É—à–∏–ª:
```bash
git reset HEAD~1  # –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç
# –£–¥–∞–ª–∏ —Å–µ–∫—Ä–µ—Ç –∏–∑ —Ñ–∞–π–ª–∞
git add .
git commit -m "Remove sensitive data"
```

2. **–ï—Å–ª–∏ –£–ñ–ï PUSH:**
```bash
# –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–º–µ–Ω–∏ –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã!
# 1. –°–º–µ–Ω–∏ –ø–∞—Ä–æ–ª—å PostgreSQL
# 2. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –Ω–æ–≤—ã–π N8N_ENCRYPTION_KEY (–±—É–¥–µ—Ç –Ω—É–∂–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö!)
# 3. –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π Service Account –≤ Yandex Cloud

# –ó–∞—Ç–µ–º –æ—á–∏—Å—Ç–∏ –∏—Å—Ç–æ—Ä–∏—é git (—Å–ª–æ–∂–Ω–æ!)
# –õ—É—á—à–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```

## üìã –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π

- [ ] `.env` —Ñ–∞–π–ª –ù–ï –≤ git (–ø—Ä–æ–≤–µ—Ä—å `git ls-files`)
- [ ] `terraform.tfvars` –ù–ï –≤ git
- [ ] `terraform.tfstate*` –ù–ï –≤ git
- [ ] –ù–µ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- [ ] –ù–µ—Ç Cloud ID / Folder ID –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä—ã)
- [ ] –ù–µ—Ç Service Account ID –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- [ ] –í—Å–µ –ø—É—Ç–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ (–Ω–µ `/Users/pandanax/...`)
- [ ] `.gitignore` –∞–∫—Ç—É–∞–ª–µ–Ω
- [ ] –í—Å–µ —à–∞–±–ª–æ–Ω—ã (`.example`) –æ–±–Ω–æ–≤–ª–µ–Ω—ã

## üí° –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤

### PostgreSQL –ø–∞—Ä–æ–ª—å
```bash
openssl rand -base64 32 | tr -d "=+/" | cut -c1-32
```

### N8N Encryption Key
```bash
openssl rand -hex 32
```

### SSH –∫–ª—é—á–∏
```bash
ssh-keygen -t ed25519 -C "your_email@example.com"
```

## üìû –í —Å–ª—É—á–∞–µ —É—Ç–µ—á–∫–∏

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–º–µ–Ω–∏ –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã**
2. **–ü–µ—Ä–µ—Å–æ–∑–¥–∞–π Service Account**
3. **–†–æ—Ç–∏—Ä—É–π SSH –∫–ª—é—á–∏**
4. **–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É**
5. **–£–≤–µ–¥–æ–º–∏ –∫–æ–º–∞–Ω–¥—É (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)**

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2026-02-01  
**–°—Ç–∞—Ç—É—Å:** –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã ‚úÖ
